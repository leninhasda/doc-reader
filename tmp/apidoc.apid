FORMAT: 1A

# Transaction API
Driver payout service.

# Group Transaction
Grouping of all the transaction related API

## Get All Transactions [GET /rides/list{?limit,page}]
Retrieves all the transactions grouped by driver ID

+ Parameters

    + limit: 1 (number, optional) - Number of results to get
        + Default: `20`

    + page: 1 (number, optional) - Page number
        + Default: `1`

+ Response 200 (application/json)

        {
            "code": 200,
            "message": null,
            "data": [
                "count": 22,
                "results": [
                    {
                        "id": 11,
                        "ride_id": 10330,
                        "driver_id": 125,
                        "due_amount": "23000",
                        "last_processed": ""
                    },
                    {
                        "id": 1,
                        "ride_id": 4,
                        "driver_id": 312,
                        "due_amount": "9952",
                        "last_processed": ""
                    }
                ]
            ]
        }

+ Response 400 (application/josn)

        {
            "code": 400,
            "message": "Bad request",
            "data": null
        }


## Get Transaction Details [GET /rides/details/{driver_id}]

+ Parameters

    + driver_id: 101 (number) - Driver ID

+ Response 200 (application/json)

        {
            "code": 200,
            "message": null,
            "data": {
                "payouts": [
                    {
                        "id": 31,
                        "ride_id": 83,
                        "ride_order_id": 83,
                        "ride_order_type": "\\App\\Ride",
                        "driver_id": 358,
                        "type": "ride_payout",
                        "description": "Driver payout for Ride #83",
                        "amount_in_cents": -1094932,
                        "is_processed": false,
                        "processed_by_id": null,
                        "processed_at": null,
                        "processed_on": null,
                        "created_at": "2017-05-02T10:23:45.000Z",
                        "updated_at": "2017-05-02T10:23:45.000Z",
                        "deleted_at": null
                    },
                    {
                        "id": 33,
                        "ride_id": 83,
                        "ride_order_id": 83,
                        "ride_order_type": "\\App\\Ride",
                        "driver_id": 358,
                        "type": "ride_payout",
                        "description": "Driver payout for Ride #83",
                        "amount_in_cents": -1095011,
                        "is_processed": false,
                        "processed_by_id": null,
                        "processed_at": null,
                        "processed_on": null,
                        "created_at": "2017-05-02T10:31:40.000Z",
                        "updated_at": "2017-05-02T10:31:40.000Z",
                        "deleted_at": null
                    }
                ],
                "referels": [
                    {
                        "id": 28,
                        "ride_id": 105,
                        "ride_order_id": 205,
                        "ride_order_type": "\\App\\Referral",
                        "driver_id": 358,
                        "type": "referral_cut",
                        "description": "Driver payout for referral #493",
                        "amount_in_cents": 25000,
                        "is_processed": false,
                        "processed_by_id": null,
                        "processed_at": null,
                        "processed_on": null,
                        "created_at": "2017-04-10T10:06:14.000Z",
                        "updated_at": "2017-04-10T10:06:14.000Z",
                        "deleted_at": null
                    },
                    {
                        "id": 30,
                        "ride_id": 107,
                        "ride_order_id": 207,
                        "ride_order_type": "\\App\\Referral",
                        "driver_id": 358,
                        "type": "referral_cut",
                        "description": "Driver payout for referral #493",
                        "amount_in_cents": 25000,
                        "is_processed": false,
                        "processed_by_id": null,
                        "processed_at": null,
                        "processed_on": null,
                        "created_at": "2017-04-20T13:39:18.000Z",
                        "updated_at": "2017-04-20T13:39:18.000Z",
                        "deleted_at": null
                    }
                ],
                "comments": [
                    {
                        "id": 1,
                        "transaction_id": 28,
                        "type": "COMMENT",
                        "data": "committed crime!",
                        "created_at": "2017-04-10T11:54:04.000Z",
                        "updated_at": "2017-04-10T11:54:04.000Z",
                        "deleted_at": null
                    }
                ]
            }
        }

+ Response 400 (application/json)

        {
            "code"; 400,
            "message": "Bad request",
            "data": null
        }

## Process a Transaction [PUT /rides/process]

+ Request (application/json)

        {
            "driver_ids": [312,493],
            "user_id": 111
        }

+ Response 200 (application/json)

        {
            "code": 200,
            "message": "updated",
            "data": [
                6 /* Number of rows that are updated */
            ]
        }

+ Response 400 (application/json)

        {
            "code"; 400,
            "message": "Bad request",
            "data": null
        }

## Add Transaction [POST /rides]

+ Request (application/json)

        {
            "ride_id": 101,
            "ride_order_id": 201,
            "ride_order_type": "\\App\\Ride",
            "driver_id": 301,
            "type": "ride_payout",
            "description": "230 TK on this ride",
            "amount_in_cents": 2300
        }

+ Response 200 (application/json)

        {
            "code": 201,
            "message": null,
            "data": {
                "id": 34,
                "ride_id": 101,
                "ride_order_id": 201,
                "ride_order_type": "\\App\\Ride",
                "driver_id": 301,
                "type": "ride_payout",
                "description": "230 TK on this ride",
                "amount_in_cents": 2300,
                "updated_at": "2017-08-09T04:16:54.837Z",
                "created_at": "2017-08-09T04:16:54.837Z"
            }
        }

+ Response 400 (application/json)

        {
            "code": 400,
            "message": "Bad request",
            "data": {
                "name": "SequelizeValidationError",
                "errors": [
                    {
                        "message": "Validation max on description failed",
                        "type": "Validation error",
                        "path": "description",
                        "value": "230 TK on this ride",
                        "__raw": {}
                    }
                ]
            }
        }

# Group Meta

## Add Comment [POST /meta]

+ Request (application/json)

        {
            "driver_id": 101,
            "comment": "An awesome comment"
        }

+ Response 200 (appilcation/json)

        {
            "code": 201,
            "message": null,
            "data": {
                "id": 4,
                "data": "awesome comment",
                "type": "COMMENT",
                "transaction_id": 1,
                "updated_at": "2017-08-08T20:58:47.481Z",
                "created_at": "2017-08-08T20:58:47.481Z"
            }
        }
